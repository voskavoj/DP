\chapter{Conclusion}
\label{s_con}

This thesis studied and experimentally demonstrated the signals of opportunity (SoP) positioning using the Doppler method and LEO satellites, which is a way of determining user position by evaluating the Doppler shift of satellite signals not intended for navigation. The advantages of SoP positioning, as discussed in \autoref{s_int}, are the high strength of the signals and their diversity in source, direction, frequency, timing and control. These strengths also present several challenges, namely the unknown signal transmission time, less accurate and stable transmitter clocks, the inability to synchronise the receiver and transmitter times, and the absence of any guarantee on signal availability as well as a general lack of documentation.
% "experimentally demonstrated" ... divně to zní :-)

The SoP positioning systems reviewed in this work were based on the Doppler shift method, which is a method of radio-frequency navigation which calculates the user position by combining measurements of the Doppler shift of the received signal and previously known transmitter position. The basis of this method is discussed in \autoref{s_pos}, along with two implementations - the observation model method and the curve fitting method. The Doppler shift measurement usually relies on coarse frequency estimation by FFT and fine estimation by PLL. The satellite position is commonly estimated by orbital propagation by the use of e.g. SGP4 algorithm coupled with orbital parameters supplied by TLE sets.

The SoP positioning is enabled by LEO communication satellites. Some of the potentially usable systems were Iridium NEXT, Orbcomm, Globalstar and Starlink, described in \autoref{s_sat}. With the exception of Starlink, which was removed from consideration due to its signal frequency being beyond the capability of the radio equipment available to this work, the constellations are made of \numrange{30}{66} active satellites transmitting QPSK-modulated signals in the L, VHF and S band, respectively. The Iridium NEXT signal portfolio contains signals especially suited for SoP navigation, such as the Ring Alert signal, which was exploited in the experimental demonstrator in this work. A simulation was run to determine that at least one satellite from each constellation is visible at almost all times (at the latitude of Central Europe).

Some of the current state-of-the-art SoP navigation systems were surveyed in \autoref{s_sop}, in addition to the legacy Transit (NAVSAT) satellite navigation system, and Argos tracking system. Generally, the system relied on purpose built receivers, which feed the Doppler shift into an EKF built around an observation model. Most of the systems reviewed were based on capturing the Iridium NEXT, although systems based on Orbcomm, Globalstar, and Starlink were also surveyed. Some systems used a combination of satellite constellations. Both static and dynamic applications were encountered, with the dynamic applications commonly relying on fusion with INS, altimeter or magnetometer data. The accuracy of position determination was mostly in the order of \qtyrange{e2}{e3}{\m} and improved significantly both with measurement time and with the number of measured satellites. In one case, the SoP positioning system provided a solution where GPS did not due to foliage. 

The surveyed systems were compared to GNSS (represented by GPS) and the Transit satellite navigation system. To do this, the SoP positioning systems were modelled by two systems, "SoP A", which represented a more accurate albeit slower system, and "SoP B", which represented the opposite. The SoP A had an accuracy of \qty{200}{m} and time to fix of \qty{600}{s}, whereas the SoP B parameters were \qty{700}{m} and \qty{120}{s}, respectively. In terms of accuracy, both systems were outclassed by GPS and, to a lesser degree, by Transit. However, the SoP B was as fast as a cold-start GPS and both SoP systems were faster than Transit. This comparison confirmed that while the current SoP systems do not compare evenly to GNSS, their performance is already sufficient for some applications as a standalone system or as an augmentation to GNSS or other forms of navigation. Importantly, the comparison highlights the potential of SoP positioning, as active research is still ongoing in the field.

The SoP positioning is demonstrated in this work by building a full-stack SoP positioning system, capable of capturing signals from Iridium NEXT satellites, identifying the transmitting satellite and calculating its position, estimating initial location without any external input, and calculating the user position estimate. The process of designing this system was described in \autoref{s_des} and the testing process and system performance was described in \autoref{s_exp}.

The positioning system built in this work is written in Python in a modular fashion, which separates the steps of signal capture and decoding (constellation-specific) from the position estimation. It was designed to be independent of the actual satellite system used to navigate, and to be used with generic SDR and antenna setup. However, the support of only Iridium and PlutoSDR were actually implemented and verified in this work. Since it is a demonstrator, modularity and readability were key design principles, as this enables further research and expansion. 

The step of signal capture and processing consists of receiving, demodulating and decoding Iridium frames, using an L-band GNSS passive antenna, an external Low Noise Amplifier, and a PlutoSDR, connected to a Windows laptop running GNURadio with external packages for the demodulation and decoding. The system identifies on which channel was a frame transmitted by knowing the channel map in advance. The system then downloads up-to-date TLEs from the internet and uses them for SGP4-algorithm predictions. Finally, the system matches Iridium internal IDs with NORAD IDs by the use of Iridium Ring Alert frames, which include an internal satellite identifier, and predicts the position of the transmitting satellite at frame reception time. Other methods of satellite identification suitable for constellations without satellite identifier within the transmitted frames were also discussed.

The user position estimation is based on the Doppler curve fitting method, which generates a Doppler curve from a trial user position and compares it to the measured Doppler curve by calculating a metric. It then performs iterative optimisation in 5 dimensions (latitude, longitude, altitude, freq. offset, freq. drift) to find the combination of the user position, offset and drift with the lowest metric.

The positioning system was evaluated using ten data sets collected in the first half of May 2024. This data was also used to verify some assumptions about the Iridium NEXT satellites, such as the maximum Doppler shift and satellite visibility time. Working with this data, the positioning system was shown to have a 2D accuracy of \qty{1669}{m} and a precision for the best \qty{95}{\percent} of data of \qty{1467}{m}. The system exhibits a southward bias likely due to incorrectly estimated offset or issues with timing. The time to achieve a sufficiently accurate position fix was \qtyrange{25}{30}{minutes}, but a time of \qty{10}{minutes} was possible. The system can reliably function with Doppler curves from as few as two satellites. The system was shown to work much better over a small set of complete Doppler curves than over longer, but incomplete data. The navigation system developed in this work performed worse than the SoP systems from the literature,
both in terms of accuracy and time to fix. This was partially due to the existing system generally using much more complex error estimation and more accurate frequency measurements.
% Skutečně je horší? A ony byly nějaké srovnatelné? Vždyť to většinou byly nesrovnatelné - s fůzí s INS a pod. A v čem bylo jejich měření frekvence přesnější? Nemyslím. I oni to museli nakone cměřir podobným principem -PLL/FLL.

The main contribution of the designed positioning system demonstrator is that it deals with all the steps of SoP positioning, highlighting the challenges which are not apparent from the literature, and providing a complete framework for further development. More broadly, this work provides a study of the process of SoP Doppler positioning and a survey of the current state-of-the-art, hinting that the future of the field is still open. The field of alternative positioning method, of which the SoP positioning is an important part, promises to address some of the many challenges of navigation, sorely needed in a world increasingly reliant on navigation systems.
% Jako možnosti další práce bych byl trochu nápaditější:
% např. další systémy. A co je hlavním zdrojem chyb? - navrhnout jak je odstranit. Např. lepší zdroj efemerid, měření na více frekvencích (to většinou funguje u dálkoěmrných, ale u Tranzitu psali že i tam vliv ionsféry snad je a zkoumal se)? 

% Kapitola Závěr je taková trochu "těžkopádná". Ale asi ok.